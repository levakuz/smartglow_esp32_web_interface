<!DOCTYPE html>
<html lang="en">
<head>
  <style>
    .h1{
      font-family: "Roboto Light",sans-serif;
      font-size: 24px;
      color:  #4C5DB8;
    }
    .div{
      display: flex;
      flex-direction:column;
      align-items: center;
    }
    .styled-table {

    margin: 25px 0;
    font-size: 0.9em;
    font-family: sans-serif;
    min-width: 600px;
    box-shadow: 0 0 20px rgba(0, 0, 0, 0.15);
  }
  .styled-table thead tr {
  background-color: #4C5DB8;
  color: #ffffff;
  text-align: center;
  }
  .styled-table th,
  .styled-table td {
    padding: 12px 15px;
  }
  .styled-table tbody tr {
    border-bottom: 1px solid #dddddd;
  }

  .styled-table tbody tr:nth-of-type(even) {
    background-color: #f3f3f3;
  }

  .styled-table tbody tr:last-of-type {
    border-bottom: 2px solid #4C5DB8;
  }
  .text{
      font-family: "Roboto Light",sans-serif;
      font-size: 18px;
  }
  .button{
      margin-top: 20px;
      background: #4C5DB8;
      box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25);
      border-radius: 15px;
      width: 120px;
      height: 39px;
      margin-left: 40px;
    }
    #zatemnenie{
        background: rgba(102, 102, 102, 0.5);
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
        display: none;
      }
    #register_device_popup{
        background: rgba(102, 102, 102, 0.5);
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
        display: none;
      }
    #okno {
        width: 300px;
        height: 500px;
        text-align: center;
        padding: 15px;
        border-radius: 10px;
        color: #0000cc;
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
        margin: auto;
        background: #fff;
      }
    #register_device_window {
        width: 700px;
        height: 600px;
        text-align: center;
        padding: 15px;
        border-radius: 10px;
        color: #0000cc;
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
        margin: auto;
        background: #fff;
      }
      #zatemnenie:target {display: block;}
      #register_device_popup:target {display: block;}
      .close {
        display: inline-block;
        border: 1px solid #0000cc;
        color: #0000cc;
        padding: 0 12px;
        margin: 10px;
        text-decoration: none;
        background: #f2f2f2;
        font-size: 14pt;
        cursor:pointer;
      }
      .close:hover {background: #e6e6ff;}
  </style>
  <meta charset="UTF-8">
  <title>SMARTGLOW v.0.1</title>
</head>
<body>
  <div class="div">
    <h1 class="h1" id='id' style="font-size: 24px; align-self: center"> Модуль {}</h1>
  </div>
  <div class="div">
    <table id="unregistered_devices" class="styled-table">
      <caption>
        <div style="display: flex; flex-direction:row; justify-content: center">
          <p style="font-size: 18px">
            Незарегистрированные устройства
          </p>
          <button style="border: none; background-color: white">
            <img src="refresh.png" style="width: 50px; height: 50px">
          </button>
        </div>
      </caption>
      <thead>
        <tr>
            <th>ID</th>
            <th>Тип устройства</th>
            <th>Регистрация устройства</th>
        </tr>
      </thead>
      <tbody>
        <tr>

        </tr>
      </tbody>
    </table>
    <table id="registered_devices" class="styled-table">
      <caption style="align-self: center">
        <div style="display: flex; flex-direction:row; justify-content: center">
          <p style="font-size: 18px">
            Зарегистрированные устройства
          </p>
          <button style="border: none; background-color: white">
            <img src="refresh.png" style="width: 50px; height: 50px">
          </button>
        </div>
      </caption>
      <thead>
        <tr>
            <th>ID</th>
            <th>Имя устройства</th>
            <th>Конфигурация</th>
            <th>Удалить устройство</th>
        </tr>
      </thead>
      <tbody>
        <tr>

        </tr>
      </tbody>
    </table>
  </div>
  <hr style="width: 100%; height:2px; background-color: #4C5DB8"/>
  <h1 class="h1"> Системные настройки</h1>
  <div>
    <div style="display: flex; flex-direction: row;">
      <h2 class="h1">Системное время: </h2>
      <input style="margin-left: 10px; height: 30px; align-self: center" type="datetime-local" name="calendar">
      <input class="button" type="submit" value="Применить">
    </div>
      <div style="display: flex; flex-direction: row;">
        <h2 class="h1">Сетевые настройки</h2>
        <div id="zatemnenie">
          <div id="okno">
            <h2 class="h1">Сетевые настройки</h2>
            <form>
              <div style="display: flex; flex-direction: row;">
                <label for="wifi_name"> Имя точки доступа Wi-Fi</label>
                <input id="wifi_name" type="text" style="height: 30px">
              </div>
              <br/>
              <div style="display: flex; flex-direction: row;">
                <label for="wifi_pass"> Пароль точки доступа Wi-Fi</label>
                <input id="wifi_pass" type="text" style="height: 30px">
              </div>
              <br/>
              <div style="display: flex; flex-direction: row;">
                <label for="broker_ip"> IP MQTT брокера</label>
                <input id="broker_ip" type="text" style="height: 30px">
              </div>
              <br/>
              <div style="display: flex; flex-direction: row;">
                <label for="broker_port"> Порт MQTT брокера</label>
                <input id="broker_port" type="text" style="height: 30px">
              </div>
              <br/>
              <div style="display: flex; flex-direction: row;">
                <label for="broker_username"> Имя пользователя MQTT брокера</label>
                <input id="broker_username" type="text" style="height: 30px">
              </div>
              <br/>
              <div style="display: flex; flex-direction: row;">
                <label for="broker_pass"> Пароль пользователя MQTT брокера</label>
                <input id="broker_pass" type="text" style="height: 30px">
              </div>
              <br/>
              <div style="display: flex; flex-direction: row;">
                <label for="time_value"> Частота отправки</label>
                <div style="display: flex; flex-direction: row;">
                  <input  id="time_value" list="time_values" type="text" style="width: 75px">
                  <datalist id="time_values">
                  </datalist>
                  <input  id="time_type" list="time" type="text" style="width: 75px">
                  <datalist id="time">
                    <option value="секунды">
                    <option value="минуты">
                    <option value="часы">
                  </datalist>
                </div>
              </div>
            </form>
            <div style="display: flex; flex-direction: row;">
              <button class="button" onclick="window.location.href='#'">Отменить</button>
              <button class="button" onclick="saveSettings();window.location.href='#'">Сохранить</button>
            </div>
          </div>
        </div>
        <button class="button" onclick="window.location.href='#zatemnenie'">Изменить</button>
      </div>
    <div id="register_device_popup">
          <div id="register_device_window">
            <h2 class="h1">Просмотр/Редактирование конфигурации</h2>
            <br/>
            <h2 id="device_id"></h2>
            <br/>
            <div style="align-self: center">
            <div style="display: flex; flex-direction: row;">
              <label for="module_id" style="margin-left: 60px"> Имя устройства управления</label>
              <input id="module_id" type="text" style="height: 20px; margin-left: 50px">
            </div>
            <form>

              <br/>
            </form>
            <div style="display: flex; flex-direction: row; margin-left: 150px">
              <button class="button" onclick="window.location.href='#'">Отменить</button>
              <button class="button" style="margin-left: 100px" onclick="saveSettings();window.location.href='#'">Сохранить</button>
            </div>
          </div>
        </div>
  </div>


</body>
<script>
  let id = "123123"
  document.getElementById('id').innerHTML = 'Модуль: ' + id;
  function addRowToUnregisteredDevices() { //добавление записи в таблицу
  // Get a reference to the table
  let tableRef = document.getElementById('unregistered_devices');

  // Insert a row in the table at row index 0
  let newRow = tableRef.insertRow(1);

  // Insert a cell in the row at index 0
  let newCell = newRow.insertCell(0);
  let newCell1 = newRow.insertCell(1);
  let newCell2 = newRow.insertCell(2);

  // Append a text node to the cell
  let newText = document.createTextNode('New top row');
  let newText1 = document.createTextNode('New top row');
  let button = document.createElement("button");
  button.innerHTML = "Зарегистрировать устройство";
  button.style.cssText = "      margin-top: 20px;\n" +
    "      background: #4C5DB8;\n" +
    "      box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25);\n" +
    "      border-radius: 15px;\n" +
    "      width: 200px;\n" +
    "      height: 39px;\n" +
    "      margin-left: 40px;";
  button.addEventListener ("click", register_new_device);
  newCell.appendChild(newText);
  newCell1.appendChild(newText1);
  newCell2.appendChild(button);
  }
  addRowToUnregisteredDevices();
  function addRowToRegisteredDevices() { //добавление записи в таблицу
  // Get a reference to the table
  let tableRef = document.getElementById('registered_devices');

  // Insert a row in the table at row index 0
  let newRow = tableRef.insertRow(1);

  // Insert a cell in the row at index 0
  let newCell = newRow.insertCell(0);
  let newCell1 = newRow.insertCell(1);
  let newCell2 = newRow.insertCell(2);
  let newCell3 = newRow.insertCell(3);

  // Append a text node to the cell
  let newText = document.createTextNode('New top row');
  let newText1 = document.createTextNode('New top row');
  let button = document.createElement("button");
  button.innerHTML = "Просмотр/редактирование конфигурации";
  button.style.cssText = "      margin-top: 20px;\n" +
    "      background: #4C5DB8;\n" +
    "      box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25);\n" +
    "      border-radius: 15px;\n" +
    "      width: 200px;\n" +
    "      height: 39px;\n" +
    "      margin-left: 0px;";
  button.addEventListener ("click", register_new_device);
  let button1 = document.createElement("button");
  button1.innerHTML = "Удалить устройство";
  button1.style.cssText = "      margin-top: 20px;\n" +
    "      background: #4C5DB8;\n" +
    "      box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25);\n" +
    "      border-radius: 15px;\n" +
    "      width: 200px;\n" +
    "      height: 39px;\n" +
    "      margin-left: 0px;";
  button.addEventListener ("click", register_new_device);
  newCell.appendChild(newText);
  newCell1.appendChild(newText1);
  newCell2.appendChild(button);
  newCell3.appendChild(button1);

  }
  addRowToRegisteredDevices();
  let device_id = 1
  function register_new_device() {
     window.location.href='#register_device_popup'
     document.getElementById('device_id').innerHTML = 'Устройство управления группой: ' + device_id;

    // window.location=document.getElementById('button').href;

  }
  function AddSensorDevice(device_id){
    let config_window = document.getElementById('register_device_window');
    let div = document.createElement('div');
    let header = document.createElement('h2');
    header.textContent = "Имя модуля";
    let input = document.createElement("select");
    let label = document.createElement("label");
    label.for = "time_value";
    label.style = "margin-right: 10px";
    label.textContent = "Частота отправки";
    input.id = "channel_time_value" + device_id.toString();
    input.type = "text";
    input.list = "time_values" + device_id.toString();
    // console.log(input.list.id)

    input.style = "width: 75px; margin-right: 10px";
    let datalist = document.createElement("datalist");
    datalist.id = "time_values" + device_id.toString();
    let input_time_measure = document.createElement("select");
    input_time_measure.style='width: 75px';
    let input_time_measure_datalist = document.createElement("select");
    input_time_measure_datalist.id = "channel_time" + device_id.toString();
    // input_time_measure_datalist.list = "time";
    input_time_measure_datalist.style = "width: 100px";
    let input_time_measure_datalist_secs = document.createElement("option");
    input_time_measure_datalist_secs.text = "секунды";
    input_time_measure_datalist_secs.value = "секунды";
    input_time_measure_datalist.appendChild(input_time_measure_datalist_secs);
    let input_time_measure_datalist_mins = document.createElement("option");
    input_time_measure_datalist_mins.text = "минуты";
    input_time_measure_datalist_mins.value = "минуты";
    input_time_measure_datalist.appendChild(input_time_measure_datalist_mins);
    let input_time_measure_datalist_hours = document.createElement("option");
    input_time_measure_datalist_hours.text = "часы";
    input_time_measure_datalist_hours.value = "часы";
    input_time_measure_datalist.appendChild(input_time_measure_datalist_hours);
    config_window.appendChild(div);
    div.appendChild(header);
    div.appendChild(label);
    div.appendChild(input);
    div.appendChild(datalist);
    div.appendChild(input_time_measure_datalist);
    console.log(input.id)
    console.log(datalist.id)
    fill_time_input(input.id, datalist.id)

  }
  AddSensorDevice(1)
  function addMechDevice(device_id){
    let config_window = document.getElementById('register_device_window');
    let header = document.createElement("h2");
    header.textContent = "Имя модуля";
    let table = document.createElement("table");
    table.id = 'mech_device_table_' + device_id.toString()
    table.classList.add("styled-table");
    table.style = "margin-left: 50px; margin-top: 0px"
    let caption = document.createElement("caption");
    caption.style = "align-self: center";
    let caption_div = document.createElement("div");
    caption_div.style = "display: flex; flex-direction:row; justify-content: center";
    caption.appendChild(caption_div)
    table.appendChild(caption)
    let caption_text = document.createElement("p");
    caption_text.textContent = "Циклы работы"
    caption_text.style = "font-size: 18px"
    caption_div.appendChild(caption_text);
    let refresh_button = document.createElement("button");
    refresh_button.style = "border: none; background-color: white; padding-left: 400px"
    caption_div.appendChild(refresh_button);
    let refresh_img = document.createElement("img");
    refresh_img.src = "refresh.png"
    refresh_img.style = "width: 50px; height: 50px"
    refresh_button.appendChild(refresh_img);
    let thead = document.createElement("thead");
    table.appendChild(thead);
    let tr = document.createElement("tr")
    thead.appendChild(tr);
    let th1 = document.createElement("th")
    th1.textContent = "Степень ШИМ"
    tr.appendChild(th1);
    let th2 = document.createElement("th")
    th2.textContent = "Время начала цикла"
    tr.appendChild(th2);
    let th3 = document.createElement("th")
    th3.textContent = "Время окончания цикла"
    tr.appendChild(th3);
    let th4 = document.createElement("th")
    th4.textContent = "Включено"
    tr.appendChild(th4);
    let th5 = document.createElement("th")
    th5.textContent = "Выключено"
    tr.appendChild(th5);
    let tbody = document.createElement("tbody")
    table.appendChild(tbody)
    let tr2 = document.createElement("tr")
    tbody.appendChild(tr2)
    config_window.appendChild(header);
    config_window.appendChild(table);


  }
  addMechDevice(1)
  function addRowToMechDevice(device_table_id, device_id){
    let tableRef = document.getElementById(device_table_id);
    // Insert a row in the table at row index 0
    let newRow = tableRef.insertRow(1);
    let newCell = newRow.insertCell(0);
    let newCell1 = newRow.insertCell(1);
    let newCell2 = newRow.insertCell(2);
    let newCell3 = newRow.insertCell(3);
    newCell3.style = "width: 100px"
    let newCell4 = newRow.insertCell(3);
    newCell4.style="width: 100px"
    let pwd_select = document.createElement("select");
    pwd_select.id = 'pwd_input' + device_id.toString()
    let input1= document.createElement("input");
    let input2 = document.createElement("input");
    let select_time_on = document.createElement("select");
    let select_time_type_on = document.createElement("select");
    select_time_type_on.id = "time_type_select_on_" + device_id.toString()
    select_time_on.id = "time_select_on_" + device_id.toString()
    let select_time_off = document.createElement("select");
    let select_time_type_off = document.createElement("select");
    select_time_type_off.id = "time_type_select" + device_id.toString()
    select_time_off.id = "time_select" + device_id.toString()
    pwd_select.style="width: 50px"
    input1.style="width: 100px"
    input1.type="time"
    input2.style="width: 100px"
    input2.type="time"
    select_time_on.style="width: 50px"
    select_time_type_on.style="width: 50px"
    select_time_off.style="width: 50px"
    select_time_type_off.style="width: 50px"
    newCell.appendChild(pwd_select)
    newCell1.appendChild(input1)
    newCell2.appendChild(input2)
    newCell3.appendChild(select_time_on)
    newCell3.appendChild(select_time_type_on)
    newCell4.appendChild(select_time_off)
    newCell4.appendChild(select_time_type_off)
    fill_pwd_input(pwd_select.id)
    fill_time_input(select_time_on.id)
    fill_time_input(select_time_off.id)
    fill_time_type_input(select_time_type_on.id)
    fill_time_type_input(select_time_type_off.id)
  }
  addRowToMechDevice('mech_device_table_1', 1)
  function showCurrentTime(value){ //установка текущего времени
    let dateControl = document.querySelector('input[type="datetime-local"]');
    dateControl.value = value;
  }

  showCurrentTime('2017-06-01T21:30');
  function saveSettings(){
  }
  function fill_time_input(input_id )
  {
    for (let i = 0; i <= 60; i++) {
      let z = document.getElementById(input_id);
      let option = document.createElement("option");
      option.value = i.toString();
      option.text = i.toString();
      z.appendChild(option);
      // register_devices.appendChild(option1);
    }
  }
  function fill_time_type_input(input_id )
  {
    let array = ["секунды","минуты","часы"];
    for (let i = 0; i < array.length; i++) {
      let z = document.getElementById(input_id);
      let option = document.createElement("option");
      option.value = array[i];
      option.text = array[i];
      z.appendChild(option);
      // register_devices.appendChild(option1);
    }
  }
  function fill_pwd_input(input_id )
  {
    for (let i = 0; i <= 100; i++) {
      let z = document.getElementById(input_id);
      let option = document.createElement("option");
      option.value = i.toString();
      option.text = i.toString();
      z.appendChild(option);
      // register_devices.appendChild(option1);
    }
  }
  // fill_time_input("time_values", "channel_time_values")

</script>
</html>
